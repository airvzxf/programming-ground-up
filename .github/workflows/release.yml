name: CI - Release books

on:
  release:
    types: [released]
  workflow_dispatch:

jobs:
  build:
    container: airvzxf/pandoc
    steps:
      - uses: actions/checkout@v2

      - name: Execute the release script
        run: |
          pandoc -v && \
          cd ./src/programming-from-the-ground-up && \
          ./make.sh && \
          cd ../../ && \
          git config --global user.name 'Israel Roldan' && \
          git config --global user.email 'israel.alberto.rv@gmail.com' && \
          git diff . && \
          git add . && \
          git commit -m "Automated Release." && \
          git status && \
          git push
